<!DOCTYPE html>
<html>
<meta charset="utf-8">

<!-- Add CSS Files-->
<link type="text/css" href="styles/bootstrap.min.css" rel="Stylesheet"/>
<link type="text/css" href="styles/project.css" rel="Stylesheet"/>

<!-- Add external scripts-->
<script src="scripts/vendor/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="scripts/vendor/bootstrap.min.js" type="text/javascript"></script>
<script src="scripts/vendor/handlebars-1.0.rc.1.js" type="text/javascript"></script>
<script src="scripts/vendor/underscore.js" type="text/javascript"></script>
<script type="text/javascript" src="http://jquery-jsonp.googlecode.com/files/jquery.jsonp-1.0.4.min.js"></script>
<script type="text/javascript" src="http://oauth.googlecode.com/svn/code/javascript/oauth.js"></script>
<script type="text/javascript" src="http://oauth.googlecode.com/svn/code/javascript/sha1.js"></script>
<script type="text/javascript" src="scripts/retrieve-storage.js"></script>
<script type="text/javascript" src="scripts/views.js"></script>
<script type="text/javascript" src="scripts/query.js"></script>
<script id="results" type="text/x-handlebars-template">
  {{#each this}}
   <div class="thumbnailContainer">
       <a href="{{url}}"  target="_blank"><h3>{{name}}</h3></a>
      <div class="thumbnail">
      <img src="{{image}}" alt="" width="150" height="100">
      </div>
      <p>"{{quote}}"</p>
      <p>Phone:{{phonenumber}}</p>
      <p>{{address}}</p>

        <p><img src="{{ratingImage}}">({{views}} reviews)</p>
        <a href="#myModal{{n}}" role="button" class="btn" data-toggle="modal">Add to Favorites</a>
        <div id="myModal{{n}}" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
          Add {{name}} to Favorites!
        </div>
        <div class="modal-body">
          <form class="form-horizontal">
            <div class="control-group">
              <label class="control-label" for="inputEmail">Tags</label>
              <div class="controls">
                <input type="text" id="inputEmail" name="tags" placeholder="Tags">
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="inputPassword">Notes</label>
              <div class="controls">
                <input type="password" id="inputPassword" name="notes" placeholder="Notes">
              </div>
            </div>
            <div class="control-group">
              <div class="controls">
                 <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                 <button class="btn btn-primary" data-dismiss="modal" onclick="saveFavorite({{object}} , tags.value, notes.value)">Save</button>
              </div>
            </div>
          </form>
        </div>
            </div>
    </div>
    {{/each}}
</script>
<script id="browse" type="text/x-handlebars-template">
  {{#each this}}
   <div class="thumbnailContainer">
       <button type="button" onclick="alert('hello');deleteBusinessFromStorage({{object}});" id="#delete"class="btn btn-link"><i class="icon-trash"></i></button>

       <a href="{{url}}"  target="_blank"><h3>{{name}}</h3></a>
      <div class="thumbnail">
        <img src="{{image}}" alt="" width="150" height="100">
      </div>
      <p>"{{quote}}"</p>
        <p>Tags:{{tags}}</p>
        <p>{{address}}</p>
        <p><img src="{{ratingImage}}">  ({{views}} reviews)</p>
        <a href="#" class="btn btn-large btn-danger" rel="popover" data-content="{{notes}}" data-original-title="Notes">Notes</a>
    </div>
    {{/each}}
</script>
<script>
    $('document').ready(function() {
     $(window).bind('storage', function(e){
      refresh();
    });

      $('body').bind('Search', function(){
        $('.active1').remove();
        $('.columnCenter').empty();
        $('.breadcrumb').empty();
        $('.breadcrumb').append('<li onclick="$(\'body\').triggerHandler('+ '\''+ 'Home' + '\''+')"><a href="#' + 'Home' +'">' + 'Home' + '</a> <span class="divider">/</span><li>');
        $('.breadcrumb').append('<li class="active1">Search</li> ');
        addQuery(lastSearch[0], lastSearch[1], lastSearch[2], lastSearch[3], lastSearch[4], lastSearch[5]);
        lastSearch.length=0;        

      });
      $('body').bind('Lookup', function(){
        $('.columnCenter').empty();
        $('.breadcrumb').empty();
        $('.breadcrumb').append('<li onclick="$(\'body\').triggerHandler('+ '\''+ 'Home' + '\''+')"><a href="#' + 'Home' +'">' + 'Home' + '</a> <span class="divider">/</span><li>');
        $('.breadcrumb').append('<li class="active1">Lookup</li> ');
        browseBookmarks(lastLookup.pop(), 0);
        lastLookup.length=0;
      });
      $('body').bind('Home', function(){
        $('.columnCenter').empty();
        $('.breadcrumb').empty();
        $('.breadcrumb').append('<li class="active1">Home</li> ');
      });
      $('searchbar').submit(function () {
          sendContactForm();  
      });
  });
</script>
<body>
<div id="pageWrapper">
  <div id= "headContainer">
     <h1><div id="logo"></div></h1>
     <ul class="nav nav-tabs">
      <li class="active"><a href="#search_favorites" data-toggle="tab">Search Favorites</a></li>
      <li><a href="#search_yelp" data-toggle="tab">Add Favorites</a></li>
    </ul>
    <div id="myTabContent" class="tab-content">
              <div class="tab-pane fade active in" id="search_favorites">
                <div class="searchContainer">
                <form id="searchbar" name="search1">
                  <input type="text" id="searchbox" placeholder="Search Favorites" name="search_favs">
                  <button class="btn btn-primary" type="submit" onsubmit="getBookmarks(search1.search_favs.value);  return false;" onclick="getBookmarks(search1.search_favs.value); return false;">Search</button>
               </form>
              </div>
              </div>
              <div class="tab-pane fade" id="search_yelp">
                 <form id="searchbar" name="search2" >
                  <input type="text" id="searchbox" placeholder="Search Business" name="search1">
                  <input type="text" id="locationbox" placeholder="Near" name="search_loc">    
                  <button class="btn" type="submit" onsubmit="searchYelp(search2.search1.value, search2.search_loc.value);  return false;" onclick="searchYelp(search2.search1.value, search2.search_loc.value); return false;">Search</button>
                 </form>
              </div>
     </div>
  </div>
  <div id="middle"><ul class="breadcrumb">
      <li class="active1">Home</li>
  </ul></div>
  <div id="contentContainer">
    <div class="columnLeft">          
    <div class="columnCenter">
      <!--<ul class="thumbnails">
          <div class="thumbnailContainer">
            <h3>{{title}}</h3>
            <div class="thumbnail">
              <img src="http://placehold.it/300x200" alt="">
              <p>"{{quote}}"</p>
              <p>Tags:{{tags}}</p>
              <p>Rating:{{ratingImage}}</p>
            </div>
          </div>
          <div class="thumbnailContainer">
            <h3>{{title}}</h3>
              <div class="thumbnail">
                <img src="http://placehold.it/300x200" alt="">
                <p>"{{quote}}"</p>
                <p>Tags:{{tags}}</p>
                <p>Rating:{{ratingImage}}</p>
              </div>
          </div>
          <div class="thumbnailContainer">
            <h3>{{title}}</h3>
            <div class="thumbnail">
              <img src="http://placehold.it/300x200" alt="">
              <p>"{{quote}}"</p>
              <p>Tags:{{tags}}</p>
              <p>Rating:{{ratingImage}}</p>
            </div>
          </div>
          <div class="thumbnailContainer">
            <h3>{{title}}</h3>
            <div class="thumbnail">
              <img src="http://placehold.it/300x200" alt="">
              <p>"{{quote}}"</p>
              <p>Tags:{{tags}}</p>
              <p>Rating:{{ratingImage}}</p>
            </div>
          </div>
    </ul>-->
    </div>
    <div class="columnRight">
    </div>
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p>Designed and built by Jenee Benjamin, Dan Mercado, Orlando Pineda, and Varun Ravishankar</p>
    <p>Code licensed under Modified BSD License, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
    <p>All results are displayed using <a href="http://yelp.com">Yelp</a>.<img src="http://s3-media1.ak.yelpcdn.com/assets/2/www/img/14f29ad24935/map/miniMapLogo.png"/></p>
  </div>
</footer>
</body>
</html>

